flows:
  pattern_chitchat:
    description: Conversation repair flow for off-topic interactions that won't disrupt the main conversation. should not respond to greetings or anything else for which there is a flow defined
    name: pattern chitchat
    steps:
      - action: utter_free_chitchat_response
  
  pattern_session_start:
    description: Flow for starting the conversation
    name: pattern session start
    nlu_trigger:
      - intent: session_start
    steps:
      - action: utter_greet_user
      - link: service_reservation

  pattern_completed:
    description: Flow that asks if the user needs more help after completing their initiated use cases
    name: pattern completed
    steps:
      - noop: true
        next:
        - if: slots.is_user_interested
          then:
          - action: utter_thank_interested_user
          - action: action_restart
            next: END
        - else:
          - action: utter_thank_disinterested_user
          - action: action_restart
            next: END
      

  pattern_cannot_handle:
    description: |
      Conversation repair flow for addressing failed command generation scenarios
    name: pattern cannot handle
    steps:
      - noop: true
        next:
          # chitchat fallback
          - if: "'{{context.reason}}' = 'cannot_handle_chitchat'"
            then:
              - action: utter_cannot_handle
                next: "END"
          # fallback for things that are not supported
          - if: "'{{context.reason}}' = 'cannot_handle_not_supported'"
            then:
              - action: utter_cannot_handle
                next: END
          # default
          - else:
              - action: action_ask_rephrase 
                next: END